sudo: required
env:
  secure: BYAVt3SnKaPO6ebgI/d/gWbCs7gDlarlIVWlXfSMQiTIaI6wZYLJF5fyQ3KhBjl8mc4d2VHbbqVkK39rrpoj+Vr6GOUjjcar9OKu4KMfqowori0VzIFZbERaBBaYNGcihbbmTO4NVGGp2ex9ki/OdsnkyGcFFIon95k1+uZHWyOTgi2ChvGFBaaSkY5n7xpASPOX02gAHGrWMutzDTO9tSfe5LfLnmK/eKd5a+Xp/FJEqnwi9J9l1TS7H9kk6MKnSj989Wz2k7lT7HgsNMYV9RJpA56AuNawWRdiPs5bwEOIuHl4528y1XeISWGYjziQpdkCmL3DLeR3lG/FwUt0Ij6l5TWyjirTCuoAWHZ+frxfXspBbD+GbQQcx0f9m2QCrVStwgioxpZDITVHzWnQedj4KugNSel9UuaRtMazktPsilSCPXjrveP+/vDL/MZhM9JBrlayDTsLKpiLKXqX51QO0z+dETuH2qEaY3WC2rpAkx7Tswbhocihq1efTtR05e8PnHPEVqf5l5/jiRlqgaIi+cC7G5lD7nEsd2OdjZDAmK2qXcBlCILE4U2FmBBR7l4xRTlKxrpDQDckEoI/ar1pHjbGqxoxVgdPqrD7KHmNCqIaoz6yO1ddt9+nxjUDA8z4CQ49dSZyQCiq0Uz5fdDcSQwuCVM5lrdBQZaEYtU=
matrix:
  include:
  - os: linux
    jdk: oraclejdk8
    language: generic
    before_install:
    - wget https://github.com/google/protobuf/releases/download/v3.6.1/protobuf-cpp-3.6.1.tar.gz
    - tar -xzvf protobuf-cpp-3.6.1.tar.gz
    - pushd protobuf-3.6.1 && ./configure --disable-shared && make && sudo make install
      && popd
    script: "./ci/travis.sh"
  - os: osx
    osx_image: xcode9.4
    language: generic
    env:
    - HOMEBREW_TEMP="/tmp"
    - LDFLAGS="/usr/local/lib/libprotobuf.a /usr/local/lib/libprotoc.a"
    before_install:
    - brew update
    - EDITOR="sed -i '' 's/system \".\/configure\",/system \".\/configure\", \"--disable-shared\",/g'"
      brew edit protobuf
    - brew install protobuf
    script: "./ci/travis.sh"
before_cache:
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
notifications:
  email: false
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
  - "$HOME/.m2"
